
#include "../include/Motor.h"
#include <wiringPi.h>
using namespace std;

Motor::Motor(){
  pinMode(,OUTPUT);
  pinMode(,OUTPUT);
}
void Motor::balayage(char choice)
{

  while (){
    if(digitalRead(pin)==1){
      cpt++;
      if (cpt<210){
        wiringPiI2CWriteReg16(fd, CMD_CW, cmd);//sense trigo
      } else if (cpt>=210 && cpt<420){
        wiringPiI2CWriteReg16(fd, CMD_CCW, cmd);//sense antitrigo
      }else{
        cpt =0
          }
    }
  }


    speed = 100; // Entre 0 et 255
    cmd = (speed << 8) | (CHANNEL & 0xFF);



        switch(choice){
        case 'r':
            wiringPiI2CWriteReg16(fd, CMD_CW, cmd);
            break;
        case 'l':
            wiringPiI2CWriteReg16(fd, CMD_CCW, cmd);
            break;
        case 'b':
            wiringPiI2CWriteReg16(fd, CMD_BRAKE, 0x00);
            break;
        case 's':
            wiringPiI2CWriteReg16(fd, CMD_STOP, 0x00);
            break;
        }

}
